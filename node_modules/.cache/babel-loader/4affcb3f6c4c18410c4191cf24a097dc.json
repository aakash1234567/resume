{"ast":null,"code":"/**\n * Atropos 2.0.2\n * Touch-friendly 3D parallax hover effects\n * https://atroposjs.com\n *\n * Copyright 2021-2023 \n *\n * Released under the MIT License\n *\n * Released on: July 4, 2023\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable no-restricted-globals */\n\n\nvar $ = function $(el, sel) {\n  return el.querySelector(sel);\n};\n\nvar $$ = function $$(el, sel) {\n  return el.querySelectorAll(sel);\n};\n\nvar removeUndefinedProps = function removeUndefinedProps(obj) {\n  if (obj === void 0) {\n    obj = {};\n  }\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (typeof obj[key] !== 'undefined') result[key] = obj[key];\n  });\n  return result;\n};\n\nvar defaults = {\n  alwaysActive: false,\n  activeOffset: 50,\n  shadowOffset: 50,\n  shadowScale: 1,\n  duration: 300,\n  rotate: true,\n  rotateTouch: true,\n  rotateXMax: 15,\n  rotateYMax: 15,\n  rotateXInvert: false,\n  rotateYInvert: false,\n  stretchX: 0,\n  stretchY: 0,\n  stretchZ: 0,\n  commonOrigin: true,\n  shadow: true,\n  highlight: true\n};\n\nfunction Atropos(originalParams) {\n  if (originalParams === void 0) {\n    originalParams = {};\n  }\n\n  var _originalParams = originalParams,\n      el = _originalParams.el,\n      eventsEl = _originalParams.eventsEl;\n  var _originalParams2 = originalParams,\n      isComponent = _originalParams2.isComponent;\n  var childrenRootEl;\n  var self = {\n    __atropos__: true,\n    params: _extends({}, defaults, {\n      onEnter: null,\n      onLeave: null,\n      onRotate: null\n    }, removeUndefinedProps(originalParams || {})),\n    destroyed: false,\n    isActive: false\n  };\n  var params = self.params;\n  var rotateEl;\n  var scaleEl;\n  var innerEl;\n  var elBoundingClientRect;\n  var eventsElBoundingClientRect;\n  var shadowEl;\n  var highlightEl;\n  var isScrolling;\n  var clientXStart;\n  var clientYStart;\n  var queue = [];\n  var queueFrameId;\n\n  var purgeQueue = function purgeQueue() {\n    queueFrameId = requestAnimationFrame(function () {\n      queue.forEach(function (data) {\n        if (typeof data === 'function') {\n          data();\n        } else {\n          var element = data.element,\n              prop = data.prop,\n              value = data.value;\n          element.style[prop] = value;\n        }\n      });\n      queue.splice(0, queue.length);\n      purgeQueue();\n    });\n  };\n\n  purgeQueue();\n\n  var $setDuration = function $setDuration(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionDuration',\n      value: value\n    });\n  };\n\n  var $setEasing = function $setEasing(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionTimingFunction',\n      value: value\n    });\n  };\n\n  var $setTransform = function $setTransform(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transform',\n      value: value\n    });\n  };\n\n  var $setOpacity = function $setOpacity(element, value) {\n    queue.push({\n      element: element,\n      prop: 'opacity',\n      value: value\n    });\n  };\n\n  var $setOrigin = function $setOrigin(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transformOrigin',\n      value: value\n    });\n  };\n\n  var $on = function $on(element, event, handler, props) {\n    return element.addEventListener(event, handler, props);\n  };\n\n  var $off = function $off(element, event, handler, props) {\n    return element.removeEventListener(event, handler, props);\n  };\n\n  var createShadow = function createShadow() {\n    var created;\n    shadowEl = $(el, '.atropos-shadow');\n\n    if (!shadowEl) {\n      shadowEl = document.createElement('span');\n      shadowEl.classList.add('atropos-shadow');\n      created = true;\n    }\n\n    $setTransform(shadowEl, \"translate3d(0,0,-\" + params.shadowOffset + \"px) scale(\" + params.shadowScale + \")\");\n\n    if (created) {\n      rotateEl.appendChild(shadowEl);\n    }\n  };\n\n  var createHighlight = function createHighlight() {\n    var created;\n    highlightEl = $(el, '.atropos-highlight');\n\n    if (!highlightEl) {\n      highlightEl = document.createElement('span');\n      highlightEl.classList.add('atropos-highlight');\n      created = true;\n    }\n\n    $setTransform(highlightEl, \"translate3d(0,0,0)\");\n\n    if (created) {\n      innerEl.appendChild(highlightEl);\n    }\n  };\n\n  var setChildrenOffset = function setChildrenOffset(_ref) {\n    var _ref$rotateXPercentag = _ref.rotateXPercentage,\n        rotateXPercentage = _ref$rotateXPercentag === void 0 ? 0 : _ref$rotateXPercentag,\n        _ref$rotateYPercentag = _ref.rotateYPercentage,\n        rotateYPercentage = _ref$rotateYPercentag === void 0 ? 0 : _ref$rotateYPercentag,\n        duration = _ref.duration,\n        opacityOnly = _ref.opacityOnly,\n        easeOut = _ref.easeOut;\n\n    var getOpacity = function getOpacity(element) {\n      if (element.dataset.atroposOpacity && typeof element.dataset.atroposOpacity === 'string') {\n        return element.dataset.atroposOpacity.split(';').map(function (v) {\n          return parseFloat(v);\n        });\n      }\n\n      return undefined;\n    };\n\n    $$(childrenRootEl, '[data-atropos-offset], [data-atropos-opacity]').forEach(function (childEl) {\n      $setDuration(childEl, duration);\n      $setEasing(childEl, easeOut ? 'ease-out' : '');\n      var elementOpacity = getOpacity(childEl);\n\n      if (rotateXPercentage === 0 && rotateYPercentage === 0) {\n        if (!opacityOnly) $setTransform(childEl, \"translate3d(0, 0, 0)\");\n        if (elementOpacity) $setOpacity(childEl, elementOpacity[0]);\n      } else {\n        var childElOffset = parseFloat(childEl.dataset.atroposOffset) / 100;\n\n        if (!Number.isNaN(childElOffset) && !opacityOnly) {\n          $setTransform(childEl, \"translate3d(\" + -rotateYPercentage * -childElOffset + \"%, \" + rotateXPercentage * -childElOffset + \"%, 0)\");\n        }\n\n        if (elementOpacity) {\n          var min = elementOpacity[0],\n              max = elementOpacity[1];\n          var rotatePercentage = Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage));\n          $setOpacity(childEl, min + (max - min) * rotatePercentage / 100);\n        }\n      }\n    });\n  };\n\n  var setElements = function setElements(clientX, clientY) {\n    var isMultiple = el !== eventsEl;\n\n    if (!elBoundingClientRect) {\n      elBoundingClientRect = el.getBoundingClientRect();\n    }\n\n    if (isMultiple && !eventsElBoundingClientRect) {\n      eventsElBoundingClientRect = eventsEl.getBoundingClientRect();\n    }\n\n    if (typeof clientX === 'undefined' && typeof clientY === 'undefined') {\n      var rect = isMultiple ? eventsElBoundingClientRect : elBoundingClientRect;\n      clientX = rect.left + rect.width / 2;\n      clientY = rect.top + rect.height / 2;\n    }\n\n    var rotateX = 0;\n    var rotateY = 0;\n    var _elBoundingClientRect = elBoundingClientRect,\n        top = _elBoundingClientRect.top,\n        left = _elBoundingClientRect.left,\n        width = _elBoundingClientRect.width,\n        height = _elBoundingClientRect.height;\n    var transformOrigin;\n\n    if (!isMultiple) {\n      var centerX = width / 2;\n      var centerY = height / 2;\n      var coordX = clientX - left;\n      var coordY = clientY - top;\n      rotateY = params.rotateYMax * (coordX - centerX) / (width / 2) * -1;\n      rotateX = params.rotateXMax * (coordY - centerY) / (height / 2);\n    } else {\n      var _eventsElBoundingClie = eventsElBoundingClientRect,\n          parentTop = _eventsElBoundingClie.top,\n          parentLeft = _eventsElBoundingClie.left,\n          parentWidth = _eventsElBoundingClie.width,\n          parentHeight = _eventsElBoundingClie.height;\n      var offsetLeft = left - parentLeft;\n      var offsetTop = top - parentTop;\n\n      var _centerX = width / 2 + offsetLeft;\n\n      var _centerY = height / 2 + offsetTop;\n\n      var _coordX = clientX - parentLeft;\n\n      var _coordY = clientY - parentTop;\n\n      rotateY = params.rotateYMax * (_coordX - _centerX) / (parentWidth - width / 2) * -1;\n      rotateX = params.rotateXMax * (_coordY - _centerY) / (parentHeight - height / 2);\n      transformOrigin = clientX - left + \"px \" + (clientY - top) + \"px\";\n    }\n\n    rotateX = Math.min(Math.max(-rotateX, -params.rotateXMax), params.rotateXMax);\n    if (params.rotateXInvert) rotateX = -rotateX;\n    rotateY = Math.min(Math.max(-rotateY, -params.rotateYMax), params.rotateYMax);\n    if (params.rotateYInvert) rotateY = -rotateY;\n    var rotateXPercentage = rotateX / params.rotateXMax * 100;\n    var rotateYPercentage = rotateY / params.rotateYMax * 100;\n    var stretchX = (isMultiple ? rotateYPercentage / 100 * params.stretchX : 0) * (params.rotateYInvert ? -1 : 1);\n    var stretchY = (isMultiple ? rotateXPercentage / 100 * params.stretchY : 0) * (params.rotateXInvert ? -1 : 1);\n    var stretchZ = isMultiple ? Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100 * params.stretchZ : 0;\n    $setTransform(rotateEl, \"translate3d(\" + stretchX + \"%, \" + -stretchY + \"%, \" + -stretchZ + \"px) rotateX(\" + rotateX + \"deg) rotateY(\" + rotateY + \"deg)\");\n\n    if (transformOrigin && params.commonOrigin) {\n      $setOrigin(rotateEl, transformOrigin);\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, 'ease-out');\n      $setTransform(highlightEl, \"translate3d(\" + -rotateYPercentage * 0.25 + \"%, \" + rotateXPercentage * 0.25 + \"%, 0)\");\n      $setOpacity(highlightEl, Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100);\n    }\n\n    setChildrenOffset({\n      rotateXPercentage: rotateXPercentage,\n      rotateYPercentage: rotateYPercentage,\n      duration: params.duration + \"ms\",\n      easeOut: true\n    });\n    if (typeof params.onRotate === 'function') params.onRotate(rotateX, rotateY);\n  };\n\n  var activate = function activate() {\n    queue.push(function () {\n      return el.classList.add('atropos-active');\n    });\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, 'ease-out');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + params.activeOffset + \"px)\");\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, 'ease-out');\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, 'ease-out');\n    }\n\n    self.isActive = true;\n  };\n\n  var onPointerEnter = function onPointerEnter(e) {\n    isScrolling = undefined;\n    if (e.type === 'pointerdown' && e.pointerType === 'mouse') return;\n    if (e.type === 'pointerenter' && e.pointerType !== 'mouse') return;\n\n    if (e.type === 'pointerdown') {\n      e.preventDefault();\n    }\n\n    clientXStart = e.clientX;\n    clientYStart = e.clientY;\n\n    if (params.alwaysActive) {\n      elBoundingClientRect = undefined;\n      eventsElBoundingClientRect = undefined;\n      return;\n    }\n\n    activate();\n    if (typeof params.onEnter === 'function') params.onEnter();\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (isScrolling === false && e.cancelable) {\n      e.preventDefault();\n    }\n  };\n\n  var onPointerMove = function onPointerMove(e) {\n    if (!params.rotate || !self.isActive) return;\n\n    if (e.pointerType !== 'mouse') {\n      if (!params.rotateTouch) return;\n      e.preventDefault();\n    }\n\n    var clientX = e.clientX,\n        clientY = e.clientY;\n    var diffX = clientX - clientXStart;\n    var diffY = clientY - clientYStart;\n\n    if (typeof params.rotateTouch === 'string' && (diffX !== 0 || diffY !== 0) && typeof isScrolling === 'undefined') {\n      if (diffX * diffX + diffY * diffY >= 25) {\n        var touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;\n        isScrolling = params.rotateTouch === 'scroll-y' ? touchAngle > 45 : 90 - touchAngle > 45;\n      }\n\n      if (isScrolling === false) {\n        el.classList.add('atropos-rotate-touch');\n\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      }\n    }\n\n    if (e.pointerType !== 'mouse' && isScrolling) {\n      return;\n    }\n\n    setElements(clientX, clientY);\n  };\n\n  var onPointerLeave = function onPointerLeave(e) {\n    elBoundingClientRect = undefined;\n    eventsElBoundingClientRect = undefined;\n    if (!self.isActive) return;\n    if (e && e.type === 'pointerup' && e.pointerType === 'mouse') return;\n    if (e && e.type === 'pointerleave' && e.pointerType !== 'mouse') return;\n\n    if (typeof params.rotateTouch === 'string' && isScrolling) {\n      el.classList.remove('atropos-rotate-touch');\n    }\n\n    if (params.alwaysActive) {\n      setElements();\n      if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n      if (typeof params.onLeave === 'function') params.onLeave();\n      return;\n    }\n\n    queue.push(function () {\n      return el.classList.remove('atropos-active');\n    });\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, '');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + 0 + \"px)\");\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, '');\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, '');\n      $setTransform(highlightEl, \"translate3d(0, 0, 0)\");\n      $setOpacity(highlightEl, 0);\n    }\n\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, '');\n    $setTransform(rotateEl, \"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)\");\n    setChildrenOffset({\n      duration: params.duration + \"ms\"\n    });\n    self.isActive = false;\n    if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n    if (typeof params.onLeave === 'function') params.onLeave();\n  };\n\n  var onDocumentClick = function onDocumentClick(e) {\n    var clickTarget = e.target;\n\n    if (!eventsEl.contains(clickTarget) && clickTarget !== eventsEl && self.isActive) {\n      onPointerLeave();\n    }\n  };\n\n  var initDOM = function initDOM() {\n    if (typeof el === 'string') {\n      el = $(document, el);\n    }\n\n    if (!el) return; // eslint-disable-next-line\n\n    if (el.__atropos__) return;\n\n    if (typeof eventsEl !== 'undefined') {\n      if (typeof eventsEl === 'string') {\n        eventsEl = $(document, eventsEl);\n      }\n    } else {\n      eventsEl = el;\n    }\n\n    childrenRootEl = isComponent ? el.parentNode.host : el;\n    Object.assign(self, {\n      el: el\n    });\n    rotateEl = $(el, '.atropos-rotate');\n    scaleEl = $(el, '.atropos-scale');\n    innerEl = $(el, '.atropos-inner'); // eslint-disable-next-line\n\n    el.__atropos__ = self;\n  };\n\n  var init = function init() {\n    initDOM();\n    if (!el || !eventsEl) return;\n\n    if (params.shadow) {\n      createShadow();\n    }\n\n    if (params.highlight) {\n      createHighlight();\n    }\n\n    if (params.rotateTouch) {\n      if (typeof params.rotateTouch === 'string') {\n        el.classList.add(\"atropos-rotate-touch-\" + params.rotateTouch);\n      } else {\n        el.classList.add('atropos-rotate-touch');\n      }\n    }\n\n    if ($(childrenRootEl, '[data-atropos-opacity]')) {\n      setChildrenOffset({\n        opacityOnly: true\n      });\n    }\n\n    $on(document, 'click', onDocumentClick);\n    $on(eventsEl, 'pointerdown', onPointerEnter);\n    $on(eventsEl, 'pointerenter', onPointerEnter);\n    $on(eventsEl, 'pointermove', onPointerMove);\n    $on(eventsEl, 'touchmove', onTouchMove);\n    $on(eventsEl, 'pointerleave', onPointerLeave);\n    $on(eventsEl, 'pointerup', onPointerLeave);\n    $on(eventsEl, 'lostpointercapture', onPointerLeave);\n\n    if (params.alwaysActive) {\n      activate();\n      setElements();\n    }\n  };\n\n  var destroy = function destroy() {\n    self.destroyed = true;\n    cancelAnimationFrame(queueFrameId);\n    $off(document, 'click', onDocumentClick);\n    $off(eventsEl, 'pointerdown', onPointerEnter);\n    $off(eventsEl, 'pointerenter', onPointerEnter);\n    $off(eventsEl, 'pointermove', onPointerMove);\n    $off(eventsEl, 'touchmove', onTouchMove);\n    $off(eventsEl, 'pointerleave', onPointerLeave);\n    $off(eventsEl, 'pointerup', onPointerLeave);\n    $off(eventsEl, 'lostpointercapture', onPointerLeave); // eslint-disable-next-line\n\n    delete el.__atropos__;\n  };\n\n  self.destroy = destroy;\n  init(); // eslint-disable-next-line\n\n  return self;\n}\n\nexport { Atropos, Atropos as default, defaults };","map":{"version":3,"mappings":"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","names":["$","el","sel","querySelector","$$","querySelectorAll","removeUndefinedProps","obj","result","Object","keys","forEach","key","defaults","alwaysActive","activeOffset","shadowOffset","shadowScale","duration","rotate","rotateTouch","rotateXMax","rotateYMax","rotateXInvert","rotateYInvert","stretchX","stretchY","stretchZ","commonOrigin","shadow","highlight","Atropos","originalParams","eventsEl","isComponent","childrenRootEl","self","__atropos__","params","onEnter","onLeave","onRotate","destroyed","isActive","rotateEl","scaleEl","innerEl","elBoundingClientRect","eventsElBoundingClientRect","shadowEl","highlightEl","isScrolling","clientXStart","clientYStart","queue","queueFrameId","purgeQueue","requestAnimationFrame","data","element","prop","value","style","splice","length","$setDuration","push","$setEasing","$setTransform","$setOpacity","$setOrigin","$on","event","handler","props","addEventListener","$off","removeEventListener","createShadow","created","document","createElement","classList","add","appendChild","createHighlight","setChildrenOffset","_ref","rotateXPercentage","_ref$rotateXPercentag","_ref$rotateYPercentag","rotateYPercentage","opacityOnly","easeOut","getOpacity","dataset","atroposOpacity","split","map","v","parseFloat","undefined","childEl","elementOpacity","childElOffset","atroposOffset","Number","isNaN","min","max","rotatePercentage","Math","abs","setElements","clientX","clientY","isMultiple","getBoundingClientRect","rect","left","width","top","height","rotateX","rotateY","transformOrigin","centerX","centerY","coordX","coordY","parentTop","parentLeft","parentWidth","parentHeight","offsetLeft","offsetTop","activate","onPointerEnter","e","type","pointerType","preventDefault","onTouchMove","cancelable","onPointerMove","diffX","diffY","touchAngle","atan2","PI","onPointerLeave","remove","onDocumentClick","clickTarget","target","contains","initDOM","parentNode","host","assign","init","destroy","cancelAnimationFrame"],"sources":["/home/runner/work/resume/resume/node_modules/src/atropos.js"],"sourcesContent":["/* eslint-disable no-restricted-globals */\nconst $ = (el, sel) => el.querySelector(sel);\nconst $$ = (el, sel) => el.querySelectorAll(sel);\n\nconst removeUndefinedProps = (obj = {}) => {\n  const result = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') result[key] = obj[key];\n  });\n  return result;\n};\nexport const defaults = {\n  alwaysActive: false,\n  activeOffset: 50,\n  shadowOffset: 50,\n  shadowScale: 1,\n  duration: 300,\n  rotate: true,\n  rotateTouch: true,\n  rotateXMax: 15,\n  rotateYMax: 15,\n  rotateXInvert: false,\n  rotateYInvert: false,\n  stretchX: 0,\n  stretchY: 0,\n  stretchZ: 0,\n  commonOrigin: true,\n  shadow: true,\n  highlight: true,\n};\nfunction Atropos(originalParams = {}) {\n  let { el, eventsEl } = originalParams;\n  const { isComponent } = originalParams;\n  let childrenRootEl;\n  const self = {\n    __atropos__: true,\n    params: {\n      ...defaults,\n      onEnter: null,\n      onLeave: null,\n      onRotate: null,\n      ...removeUndefinedProps(originalParams || {}),\n    },\n    destroyed: false,\n    isActive: false,\n  };\n\n  const { params } = self;\n\n  let rotateEl;\n  let scaleEl;\n  let innerEl;\n\n  let elBoundingClientRect;\n  let eventsElBoundingClientRect;\n\n  let shadowEl;\n  let highlightEl;\n\n  let isScrolling;\n  let clientXStart;\n  let clientYStart;\n\n  const queue = [];\n  let queueFrameId;\n  const purgeQueue = () => {\n    queueFrameId = requestAnimationFrame(() => {\n      queue.forEach((data) => {\n        if (typeof data === 'function') {\n          data();\n        } else {\n          const { element, prop, value } = data;\n          element.style[prop] = value;\n        }\n      });\n      queue.splice(0, queue.length);\n      purgeQueue();\n    });\n  };\n  purgeQueue();\n\n  const $setDuration = (element, value) => {\n    queue.push({ element, prop: 'transitionDuration', value });\n  };\n  const $setEasing = (element, value) => {\n    queue.push({ element, prop: 'transitionTimingFunction', value });\n  };\n  const $setTransform = (element, value) => {\n    queue.push({ element, prop: 'transform', value });\n  };\n  const $setOpacity = (element, value) => {\n    queue.push({ element, prop: 'opacity', value });\n  };\n  const $setOrigin = (element, value) => {\n    queue.push({ element, prop: 'transformOrigin', value });\n  };\n  const $on = (element, event, handler, props) => element.addEventListener(event, handler, props);\n  const $off = (element, event, handler, props) =>\n    element.removeEventListener(event, handler, props);\n\n  const createShadow = () => {\n    let created;\n    shadowEl = $(el, '.atropos-shadow');\n    if (!shadowEl) {\n      shadowEl = document.createElement('span');\n      shadowEl.classList.add('atropos-shadow');\n      created = true;\n    }\n    $setTransform(\n      shadowEl,\n      `translate3d(0,0,-${params.shadowOffset}px) scale(${params.shadowScale})`,\n    );\n    if (created) {\n      rotateEl.appendChild(shadowEl);\n    }\n  };\n  const createHighlight = () => {\n    let created;\n    highlightEl = $(el, '.atropos-highlight');\n    if (!highlightEl) {\n      highlightEl = document.createElement('span');\n      highlightEl.classList.add('atropos-highlight');\n      created = true;\n    }\n\n    $setTransform(highlightEl, `translate3d(0,0,0)`);\n    if (created) {\n      innerEl.appendChild(highlightEl);\n    }\n  };\n\n  const setChildrenOffset = ({\n    rotateXPercentage = 0,\n    rotateYPercentage = 0,\n    duration,\n    opacityOnly,\n    easeOut,\n  }) => {\n    const getOpacity = (element) => {\n      if (element.dataset.atroposOpacity && typeof element.dataset.atroposOpacity === 'string') {\n        return element.dataset.atroposOpacity.split(';').map((v) => parseFloat(v));\n      }\n      return undefined;\n    };\n\n    $$(childrenRootEl, '[data-atropos-offset], [data-atropos-opacity]').forEach((childEl) => {\n      $setDuration(childEl, duration);\n      $setEasing(childEl, easeOut ? 'ease-out' : '');\n      const elementOpacity = getOpacity(childEl);\n      if (rotateXPercentage === 0 && rotateYPercentage === 0) {\n        if (!opacityOnly) $setTransform(childEl, `translate3d(0, 0, 0)`);\n        if (elementOpacity) $setOpacity(childEl, elementOpacity[0]);\n      } else {\n        const childElOffset = parseFloat(childEl.dataset.atroposOffset) / 100;\n        if (!Number.isNaN(childElOffset) && !opacityOnly) {\n          $setTransform(\n            childEl,\n            `translate3d(${-rotateYPercentage * -childElOffset}%, ${\n              rotateXPercentage * -childElOffset\n            }%, 0)`,\n          );\n        }\n        if (elementOpacity) {\n          const [min, max] = elementOpacity;\n          const rotatePercentage = Math.max(\n            Math.abs(rotateXPercentage),\n            Math.abs(rotateYPercentage),\n          );\n          $setOpacity(childEl, min + ((max - min) * rotatePercentage) / 100);\n        }\n      }\n    });\n  };\n\n  const setElements = (clientX, clientY) => {\n    const isMultiple = el !== eventsEl;\n    if (!elBoundingClientRect) {\n      elBoundingClientRect = el.getBoundingClientRect();\n    }\n    if (isMultiple && !eventsElBoundingClientRect) {\n      eventsElBoundingClientRect = eventsEl.getBoundingClientRect();\n    }\n    if (typeof clientX === 'undefined' && typeof clientY === 'undefined') {\n      const rect = isMultiple ? eventsElBoundingClientRect : elBoundingClientRect;\n      clientX = rect.left + rect.width / 2;\n      clientY = rect.top + rect.height / 2;\n    }\n\n    let rotateX = 0;\n    let rotateY = 0;\n    const { top, left, width, height } = elBoundingClientRect;\n    let transformOrigin;\n    if (!isMultiple) {\n      const centerX = width / 2;\n      const centerY = height / 2;\n\n      const coordX = clientX - left;\n      const coordY = clientY - top;\n\n      rotateY = ((params.rotateYMax * (coordX - centerX)) / (width / 2)) * -1;\n      rotateX = (params.rotateXMax * (coordY - centerY)) / (height / 2);\n    } else {\n      const {\n        top: parentTop,\n        left: parentLeft,\n        width: parentWidth,\n        height: parentHeight,\n      } = eventsElBoundingClientRect;\n      const offsetLeft = left - parentLeft;\n      const offsetTop = top - parentTop;\n\n      const centerX = width / 2 + offsetLeft;\n      const centerY = height / 2 + offsetTop;\n\n      const coordX = clientX - parentLeft;\n      const coordY = clientY - parentTop;\n\n      rotateY = ((params.rotateYMax * (coordX - centerX)) / (parentWidth - width / 2)) * -1;\n      rotateX = (params.rotateXMax * (coordY - centerY)) / (parentHeight - height / 2);\n      transformOrigin = `${clientX - left}px ${clientY - top}px`;\n    }\n\n    rotateX = Math.min(Math.max(-rotateX, -params.rotateXMax), params.rotateXMax);\n    if (params.rotateXInvert) rotateX = -rotateX;\n    rotateY = Math.min(Math.max(-rotateY, -params.rotateYMax), params.rotateYMax);\n    if (params.rotateYInvert) rotateY = -rotateY;\n\n    const rotateXPercentage = (rotateX / params.rotateXMax) * 100;\n    const rotateYPercentage = (rotateY / params.rotateYMax) * 100;\n\n    const stretchX =\n      (isMultiple ? (rotateYPercentage / 100) * params.stretchX : 0) *\n      (params.rotateYInvert ? -1 : 1);\n    const stretchY =\n      (isMultiple ? (rotateXPercentage / 100) * params.stretchY : 0) *\n      (params.rotateXInvert ? -1 : 1);\n    const stretchZ = isMultiple\n      ? (Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100) * params.stretchZ\n      : 0;\n    $setTransform(\n      rotateEl,\n      `translate3d(${stretchX}%, ${-stretchY}%, ${-stretchZ}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`,\n    );\n    if (transformOrigin && params.commonOrigin) {\n      $setOrigin(rotateEl, transformOrigin);\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, `${params.duration}ms`);\n      $setEasing(highlightEl, 'ease-out');\n      $setTransform(\n        highlightEl,\n        `translate3d(${-rotateYPercentage * 0.25}%, ${rotateXPercentage * 0.25}%, 0)`,\n      );\n      $setOpacity(\n        highlightEl,\n        Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100,\n      );\n    }\n\n    setChildrenOffset({\n      rotateXPercentage,\n      rotateYPercentage,\n      duration: `${params.duration}ms`,\n      easeOut: true,\n    });\n\n    if (typeof params.onRotate === 'function') params.onRotate(rotateX, rotateY);\n  };\n\n  const activate = () => {\n    queue.push(() => el.classList.add('atropos-active'));\n    $setDuration(rotateEl, `${params.duration}ms`);\n    $setEasing(rotateEl, 'ease-out');\n    $setTransform(scaleEl, `translate3d(0,0, ${params.activeOffset}px)`);\n    $setDuration(scaleEl, `${params.duration}ms`);\n    $setEasing(scaleEl, 'ease-out');\n    if (shadowEl) {\n      $setDuration(shadowEl, `${params.duration}ms`);\n      $setEasing(shadowEl, 'ease-out');\n    }\n\n    self.isActive = true;\n  };\n\n  const onPointerEnter = (e) => {\n    isScrolling = undefined;\n    if (e.type === 'pointerdown' && e.pointerType === 'mouse') return;\n    if (e.type === 'pointerenter' && e.pointerType !== 'mouse') return;\n    if (e.type === 'pointerdown') {\n      e.preventDefault();\n    }\n    clientXStart = e.clientX;\n    clientYStart = e.clientY;\n\n    if (params.alwaysActive) {\n      elBoundingClientRect = undefined;\n      eventsElBoundingClientRect = undefined;\n      return;\n    }\n    activate();\n    if (typeof params.onEnter === 'function') params.onEnter();\n  };\n\n  const onTouchMove = (e) => {\n    if (isScrolling === false && e.cancelable) {\n      e.preventDefault();\n    }\n  };\n\n  const onPointerMove = (e) => {\n    if (!params.rotate || !self.isActive) return;\n    if (e.pointerType !== 'mouse') {\n      if (!params.rotateTouch) return;\n      e.preventDefault();\n    }\n    const { clientX, clientY } = e;\n\n    const diffX = clientX - clientXStart;\n    const diffY = clientY - clientYStart;\n    if (\n      typeof params.rotateTouch === 'string' &&\n      (diffX !== 0 || diffY !== 0) &&\n      typeof isScrolling === 'undefined'\n    ) {\n      if (diffX * diffX + diffY * diffY >= 25) {\n        const touchAngle = (Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180) / Math.PI;\n        isScrolling = params.rotateTouch === 'scroll-y' ? touchAngle > 45 : 90 - touchAngle > 45;\n      }\n      if (isScrolling === false) {\n        el.classList.add('atropos-rotate-touch');\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      }\n    }\n    if (e.pointerType !== 'mouse' && isScrolling) {\n      return;\n    }\n    setElements(clientX, clientY);\n  };\n\n  const onPointerLeave = (e) => {\n    elBoundingClientRect = undefined;\n    eventsElBoundingClientRect = undefined;\n    if (!self.isActive) return;\n    if (e && e.type === 'pointerup' && e.pointerType === 'mouse') return;\n    if (e && e.type === 'pointerleave' && e.pointerType !== 'mouse') return;\n    if (typeof params.rotateTouch === 'string' && isScrolling) {\n      el.classList.remove('atropos-rotate-touch');\n    }\n\n    if (params.alwaysActive) {\n      setElements();\n      if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n      if (typeof params.onLeave === 'function') params.onLeave();\n      return;\n    }\n\n    queue.push(() => el.classList.remove('atropos-active'));\n    $setDuration(scaleEl, `${params.duration}ms`);\n    $setEasing(scaleEl, '');\n    $setTransform(scaleEl, `translate3d(0,0, ${0}px)`);\n    if (shadowEl) {\n      $setDuration(shadowEl, `${params.duration}ms`);\n      $setEasing(shadowEl, '');\n    }\n    if (highlightEl) {\n      $setDuration(highlightEl, `${params.duration}ms`);\n      $setEasing(highlightEl, '');\n      $setTransform(highlightEl, `translate3d(0, 0, 0)`);\n      $setOpacity(highlightEl, 0);\n    }\n    $setDuration(rotateEl, `${params.duration}ms`);\n    $setEasing(rotateEl, '');\n    $setTransform(rotateEl, `translate3d(0,0,0) rotateX(0deg) rotateY(0deg)`);\n\n    setChildrenOffset({ duration: `${params.duration}ms` });\n\n    self.isActive = false;\n    if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n    if (typeof params.onLeave === 'function') params.onLeave();\n  };\n\n  const onDocumentClick = (e) => {\n    const clickTarget = e.target;\n    if (!eventsEl.contains(clickTarget) && clickTarget !== eventsEl && self.isActive) {\n      onPointerLeave();\n    }\n  };\n\n  const initDOM = () => {\n    if (typeof el === 'string') {\n      el = $(document, el);\n    }\n    if (!el) return;\n\n    // eslint-disable-next-line\n    if (el.__atropos__) return;\n\n    if (typeof eventsEl !== 'undefined') {\n      if (typeof eventsEl === 'string') {\n        eventsEl = $(document, eventsEl);\n      }\n    } else {\n      eventsEl = el;\n    }\n    childrenRootEl = isComponent ? el.parentNode.host : el;\n\n    Object.assign(self, {\n      el,\n    });\n\n    rotateEl = $(el, '.atropos-rotate');\n    scaleEl = $(el, '.atropos-scale');\n    innerEl = $(el, '.atropos-inner');\n\n    // eslint-disable-next-line\n    el.__atropos__ = self;\n  };\n\n  const init = () => {\n    initDOM();\n    if (!el || !eventsEl) return;\n    if (params.shadow) {\n      createShadow();\n    }\n    if (params.highlight) {\n      createHighlight();\n    }\n    if (params.rotateTouch) {\n      if (typeof params.rotateTouch === 'string') {\n        el.classList.add(`atropos-rotate-touch-${params.rotateTouch}`);\n      } else {\n        el.classList.add('atropos-rotate-touch');\n      }\n    }\n    if ($(childrenRootEl, '[data-atropos-opacity]')) {\n      setChildrenOffset({ opacityOnly: true });\n    }\n    $on(document, 'click', onDocumentClick);\n    $on(eventsEl, 'pointerdown', onPointerEnter);\n    $on(eventsEl, 'pointerenter', onPointerEnter);\n    $on(eventsEl, 'pointermove', onPointerMove);\n    $on(eventsEl, 'touchmove', onTouchMove);\n    $on(eventsEl, 'pointerleave', onPointerLeave);\n    $on(eventsEl, 'pointerup', onPointerLeave);\n    $on(eventsEl, 'lostpointercapture', onPointerLeave);\n\n    if (params.alwaysActive) {\n      activate();\n      setElements();\n    }\n  };\n\n  const destroy = () => {\n    self.destroyed = true;\n    cancelAnimationFrame(queueFrameId);\n    $off(document, 'click', onDocumentClick);\n    $off(eventsEl, 'pointerdown', onPointerEnter);\n    $off(eventsEl, 'pointerenter', onPointerEnter);\n    $off(eventsEl, 'pointermove', onPointerMove);\n    $off(eventsEl, 'touchmove', onTouchMove);\n    $off(eventsEl, 'pointerleave', onPointerLeave);\n    $off(eventsEl, 'pointerup', onPointerLeave);\n    $off(eventsEl, 'lostpointercapture', onPointerLeave);\n    // eslint-disable-next-line\n    delete el.__atropos__;\n  };\n\n  self.destroy = destroy;\n\n  init();\n\n  // eslint-disable-next-line\n  return self;\n}\nexport { Atropos };\nexport default Atropos;\n"]},"metadata":{},"sourceType":"module"}